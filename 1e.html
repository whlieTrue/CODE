<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>MUS - EPISODE 1</title>
    <style>
        /* 기본 스타일 */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background: #000;
            font-family: 'Courier New', Courier, monospace;
        }

        /* --- 터미널 스타일 --- */
        #terminal {
            width: 100%; height: 100%; background: #000; color: #0f0;
            padding: 30px; box-sizing: border-box; font-size: 18px;
            line-height: 1.6; overflow-y: auto; position: absolute; top: 0; left: 0; z-index: 10;
        }
        .log-line { margin-bottom: 8px; white-space: pre-wrap; }
        .system-msg { color: #0f0; }
        .narrative-msg { color: #fff; text-shadow: 0 0 5px #fff; }
        #choice-container { margin-top: 30px; display: none; }
        .btn {
            background: transparent; border: 1px solid #0f0; color: #0f0;
            padding: 10px 20px; font-family: inherit; font-size: 18px;
            cursor: pointer; margin-right: 20px; transition: all 0.3s;
        }
        .btn:hover { background: #0f0; color: #000; box-shadow: 0 0 15px #0f0; }
        .glitch { animation: glitch-anim 0.2s infinite; color: #f00 !important; border-color: #f00 !important; }
        @keyframes glitch-anim {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        /* --- 스토리 대화창 스타일 (처음엔 숨김) --- */
        #story-ui {
            display: none; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('practice_room.jpg');
            background-size: cover; background-position: center;
            flex-direction: column; justify-content: flex-end; align-items: center;
        }
        #textbox {
            width: 80%; max-width: 800px; height: 120px;
            background: rgba(20, 20, 25, 0.9); border: 1px solid #444;
            border-radius: 5px; margin-bottom: 50px; padding: 25px;
            cursor: pointer; position: relative;
        }
        #name { font-weight: bold; font-size: 1.1em; color: #4da6ff; margin-bottom: 8px; }
        #text { line-height: 1.6; font-size: 1.05em; color: #eee; }
    </style>
</head>
<body>

    <div id="terminal">
        <div id="log"></div>
        <div id="choice-container">
            <button class="btn" onclick="startGame()">[시스템 접속]</button>
            <button id="leave-btn" class="btn" onclick="glitchButton()">[탈출하기]</button>
        </div>
    </div>

    <div id="story-ui">
        <div id="textbox" onclick="nextScene()">
            <div id="name">이름</div>
            <div id="text">...</div>
        </div>
    </div>

    <script>
        // --- 터미널 로직 ---
        const logArea = document.getElementById('log');
        const terminal = document.getElementById('terminal');
        const choiceContainer = document.getElementById('choice-container');
        const leaveBtn = document.getElementById('leave-btn');

        const introLines = [
            "이 세계는 AI의 잘못된 발달로 인한 인간의 멸종이 일어났다.",
            "난 이 세계를 탈출할 거다."
        ];

        async function initSequence() {
            const bootLogs = ["INITIALIZING SYSTEM...", "LOADING NEURAL NETWORK...", "DECODING SURVIVOR_LOG_#042..."];
            for (let log of bootLogs) {
                const d = document.createElement('div');
                d.className = "log-line system-msg";
                d.textContent = `> ${log}`;
                logArea.appendChild(d);
                await new Promise(r => setTimeout(r, 400));
            }
            await new Promise(r => setTimeout(r, 600));
            for (let line of introLines) {
                await typeWriter(line);
                await new Promise(r => setTimeout(r, 800));
            }
            choiceContainer.style.display = "block";
            terminal.scrollTop = terminal.scrollHeight;
        }

        function typeWriter(text) {
            return new Promise(resolve => {
                const div = document.createElement('div');
                div.className = "log-line narrative-msg";
                logArea.appendChild(div);
                let i = 0;
                function type() {
                    if (i < text.length) {
                        div.textContent += text.charAt(i);
                        i++;
                        terminal.scrollTop = terminal.scrollHeight;
                        setTimeout(type, 50);
                    } else { resolve(); }
                }
                type();
            });
        }

        function glitchButton() {
            leaveBtn.classList.add('glitch');
            leaveBtn.textContent = "[오류: 접근 불가]";
            setTimeout(() => {
                leaveBtn.classList.remove('glitch');
                leaveBtn.textContent = "[시스템 접속]";
                leaveBtn.onclick = startGame;
                const errorMsg = document.createElement('div');
                errorMsg.className = "log-line";
                errorMsg.style.color = "#f00";
                errorMsg.textContent = "SYSTEM ERROR: 탈출 경로가 차단되었습니다. 강제 동기화를 시작합니다.";
                logArea.appendChild(errorMsg);
                terminal.scrollTop = terminal.scrollHeight;
            }, 1000);
        }

        // --- 게임 시작 버튼 눌렀을 때 ---
        function startGame() {
            terminal.style.display = 'none'; // 터미널 숨기기
            document.getElementById('story-ui').style.display = 'flex'; // 스토리 UI 보이기
            nextScene(); // 첫 번째 대사 자동 시작
        }

        // --- 스토리 데이터 및 로직 ---
        const storyData = [
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" },
            { name: "???", text: "???" }
        ];

        let currentIdx = -1;
        function nextScene() {
            currentIdx++;
            if (currentIdx < storyData.length) {
                document.getElementById('name').innerText = storyData[currentIdx].name;
                document.getElementById('text').innerText = storyData[currentIdx].text;
                
                // 캐릭터별 이름 색상
                const nameTag = document.getElementById('name');
                if(storyData[currentIdx].name === "???") nameTag.style.color = "#4da6ff";
                else if(storyData[currentIdx].name === "???") nameTag.style.color = "#ffdd44";
                else nameTag.style.color = "#ff4d4d";
            } else {
                alert("연습(튜토리얼)이 시작됩니다!");
                // 여기에 나중에 만들 튜토리얼 코드를 넣으세요!
            }
        }

        window.onload = initSequence;
    </script>
</body>
</html>
