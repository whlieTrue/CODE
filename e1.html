<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>MUS - EPISOD 1</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
            font-family: 'Courier New', Courier, monospace;
        }

        #terminal {
            width: 100%;
            height: 100%;
            background: #000;
            color: #0f0;
            padding: 30px;
            box-sizing: border-box;
            font-size: 18px;
            line-height: 1.6;
            overflow-y: auto;
        }

        .log-line {
            margin-bottom: 8px;
            white-space: pre-wrap;
        }

        .system-msg {
            color: #0f0;
        }

        .narrative-msg {
            color: #fff;
            text-shadow: 0 0 5px #fff;
        }

        /* 버튼 스타일 */
        #choice-container {
            margin-top: 30px;
            display: none;
            /* 초기에는 숨김 */
        }

        .btn {
            background: transparent;
            border: 1px solid #0f0;
            color: #0f0;
            padding: 10px 20px;
            font-family: inherit;
            font-size: 18px;
            cursor: pointer;
            margin-right: 20px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #0f0;
            color: #000;
            box-shadow: 0 0 15px #0f0;
        }

        /* 지지직 거리는 효과 (Glitch) */
        .glitch {
            animation: glitch-anim 0.2s infinite;
            color: #f00 !important;
            border-color: #f00 !important;
        }

        @keyframes glitch-anim {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-2px, 2px);
            }

            40% {
                transform: translate(-2px, -2px);
            }

            60% {
                transform: translate(2px, 2px);
            }

            80% {
                transform: translate(2px, -2px);
            }

            100% {
                transform: translate(0);
            }
        }
    </style>
</head>

<body>

    <div id="terminal">
        <div id="log"></div>
        <div id="choice-container">
            <button class="btn" onclick="startGame()">[시작하기]</button>
            <button id="leave-btn" class="btn" onclick="glitchButton()">[떠나기]</button>
        </div>
    </div>

    <script>
        const logArea = document.getElementById('log');
        const terminal = document.getElementById('terminal');
        const choiceContainer = document.getElementById('choice-container');
        const leaveBtn = document.getElementById('leave-btn');

        const storyLines = [
            "이 세계는 AI의 잘못된 발달로 인한 인간의 멸종이 일어났다.",
            "AI의 실험으로 인간의 뇌를 50% 이상으로 사용할 수 있게 되는 상황이 초래되었다.",
            "난 이 세계를 탈출할 거다."
        ];

        // 한 글자씩 타이핑하는 효과
        function typeWriter(text, color = "#fff", speed = 50) {
            return new Promise(resolve => {
                const div = document.createElement('div');
                div.className = "log-line narrative-msg";
                div.style.color = color;
                logArea.appendChild(div);

                let i = 0;
                function type() {
                    if (i < text.length) {
                        div.textContent += text.charAt(i);
                        i++;
                        terminal.scrollTop = terminal.scrollHeight;
                        setTimeout(type, speed);
                    } else {
                        resolve();
                    }
                }
                type();
            });
        }

        async function initSequence() {
            // 부팅 로그 (빠르게)
            const bootLogs = [
                "INITIALIZING SYSTEM...",
                "LOADING NEURAL NETWORK...",
                "DECODING SURVIVOR_LOG_#042..."
            ];

            for (let log of bootLogs) {
                const d = document.createElement('div');
                d.className = "log-line system-msg";
                d.textContent = `> ${log}`;
                logArea.appendChild(d);
                await new Promise(r => setTimeout(r, 400));
            }

            await new Promise(r => setTimeout(r, 1000));

            // 스토리 타이핑
            for (let line of storyLines) {
                await typeWriter(line);
                await new Promise(r => setTimeout(r, 800)); // 문장 사이 대기
            }

            // 선택지 표시
            choiceContainer.style.display = "block";
            terminal.scrollTop = terminal.scrollHeight;
        }

        // 떠나기 버튼 클릭 시 발생하는 현상
        function glitchButton() {
            // 지지직 사운드 효과 대용 (시각적)
            leaveBtn.classList.add('glitch');
            leaveBtn.textContent = "[오류: 접근 불가]";

            setTimeout(() => {
                leaveBtn.classList.remove('glitch');
                leaveBtn.textContent = "[시작하기]";
                leaveBtn.onclick = startGame; // 기능도 시작하기로 변경

                const errorMsg = document.createElement('div');
                errorMsg.className = "log-line";
                errorMsg.style.color = "#f00";
                errorMsg.textContent = "SYSTEM ERROR: 탈출 경로가 차단되었습니다. 프로세스를 강제 재시작합니다.";
                logArea.appendChild(errorMsg);
                terminal.scrollTop = terminal.scrollHeight;
            }, 1000);
        }

        function startGame() {
            alert("시스템에 접속합니다... 행운을 빕니다.");
            // 이후 게임 로직이나 메인 터미널로 이동
            location.reload(); // 예시로 새로고침
        }

        // 시작
        window.onload = initSequence;
    </script>
</body>

</html>
